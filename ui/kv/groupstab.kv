#: import Factory kivy.factory.Factory

<GroupPopupSectionEntry>:
  Label:
    id: section_name
    size_hint_x: 7

  Label:
    id: section_size
    size_hint_x: 4

  Button:
    text: 'Select'
    on_press: root.popup.select_section(section_name.text)
    size_hint_x: 3

  Button:
    text: 'Remove'
    size_hint_x: 3


<GroupPopupSectionSessionEntry>:
  Label:
    id: section_session_type
    size_hint_x: 2

  Label:
    id: section_session_name
    size_hint_x: 7

  Button:
    text: 'Remove'
    size_hint_x: 3


<GroupPopupGroupSessionEntry>:
  Label:
    id: session_name
    size_hint_x: 10

  Button:
    text: 'Remove'
    size_hint_x: 2

<GroupPopup>:
  title: 'Add Sessions to Group'
  auto_dismiss: False

  TabbedPanel:
    size_hint: 1, 1
    pos_hint: { 'center.x': .5, 'center.y': .5 }
    do_default_tab: False

    TabbedPanelItem:
      text: 'Group\nSessions'

      BoxLayout:
        orientation: 'vertical'

        BoxLayout:
          size_hint_y: 1
          Spinner:
            id: group_session
            text: 'Classroom (Lecture)'
            size_hint_x: 10

          Button:
            text: 'Add'
            size_hint_x: 1
            on_press: root.add_lecture_session(group_session.text)

        RecycleView:
          id: group_sessions
          size_hint_y: 10
          viewclass: 'GroupPopupGroupSessionEntry'

          RecycleBoxLayout:
            default_size: None, dp(56)
            default_size_hint: 1, None
            size_hint_y: None
            height: self.minimum_height
            orientation: 'vertical'
            
        Button:
          text: 'Return'
          on_press: root.dismiss()

    TabbedPanelItem:
      text: 'Sections'

      BoxLayout:
        orientation: 'vertical'

        BoxLayout:
          size_hint_y: 1

          TextInput:
            id: section_name
            multiline: False
            hint_text: 'Section Name'
            size_hint_x: 10

          TextInput:
            id: section_size
            multiline: False
            hint_text: 'Size'
            size_hint_x: 3

          Button:
            text: 'Add\nSection'
            on_press: root.add_section(section_name.text, section_size.text)
            size_hint_x: 1

        BoxLayout:
          size_hint_y: 1

          Spinner:
            id: section
            text: 'Section'
            size_hint_x: 5

          Spinner:
            id: section_session
            text: 'Session'
            size_hint_x: 5

          Button:
            text: 'Add\nSession'
            size_hint_x: 1
            on_press: root.add_session_to_section(section.text, section_session.text)

        BoxLayout:
          size_hint_y: 10

          BoxLayout:
            orientation: 'vertical'

            Label:
              text: 'Sections'

            RecycleView:
              id: sections 
              viewclass: 'GroupPopupSectionEntry'
              size_hint_y: 10

              RecycleBoxLayout:
                default_size: None, dp(56)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'

          BoxLayout:
            orientation: 'vertical'

            Label: 
              id: section_sessions_label
              text: 'Section\'s Sessions'

            RecycleView:
              id: section_sessions
              viewclass: 'GroupPopupSectionSessionEntry'
              size_hint_y: 10

              RecycleBoxLayout:
                default_size: None, dp(56)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'


        Button:
          text: 'Return'
          on_press: root.dismiss()


<GroupEntry>:
  Label:
    id: group_name
    size_hint_x: 7

  Button:
    text: 'Edit\nto Group'
    size_hint_x: 2
    on_press: Factory.GroupPopup(root.group).open()

  Button:
    text: 'Delete\nGroup'
    size_hint_x: 2
    on_press: root.delete_group()

<GroupsTab>:
  orientation: 'vertical'

  BoxLayout:
    TextInput:
      id: group_name
      hint_text: 'Group name'
      size_hint_x: 7
      multiline: False

    Button:
      text: 'Add\nGroup'
      size_hint_x: 2
      on_press: root.create_group(group_name.text)

    Button:
      text: 'Refresh'
      on_press: root.refresh_groups()

  RecycleView:
    id: groups
    size_hint_y: 10
    viewclass: 'GroupEntry'

    RecycleBoxLayout:
      default_size: None, dp(56)
      default_size_hint: 1, None
      size_hint_y: None
      height: self.minimum_height
      orientation: 'vertical'

